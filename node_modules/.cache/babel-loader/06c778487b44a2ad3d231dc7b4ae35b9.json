{"ast":null,"code":"var _jsxFileName = \"/Users/manu/_CODE/PROYECTOS/HOLACOMUNIDAD/_CODES/d-board/src/components/sample-forms/login.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Amplify, { Auth } from 'aws-amplify';\nimport Validation from '../forms/validation';\nimport Alert from '../alerts';\nimport config from '../../aws-exports';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nAmplify.configure(config);\n\nconst Login = ({\n  message = null\n}) => {\n  _s();\n\n  const history = useHistory();\n  console.log('--history--', history);\n  const [onSubmit, setOnSubmit] = useState(null);\n  const [errorAuth, setErrorAuth] = useState('');\n  let items = [{\n    label: 'Email',\n    error: {\n      required: 'Ingrese un email Válido'\n    },\n    name: 'email',\n    type: 'email',\n    placeholder: 'Ingrese su email'\n  }, {\n    label: 'Clave',\n    error: {\n      required: 'Password is required',\n      minLength: {\n        value: 4,\n        message: 'Your password should have at least 4 characters'\n      },\n      maxLength: {\n        value: 8,\n        message: 'Your password should have no more than 8 characters'\n      }\n    },\n    name: 'password',\n    type: 'password',\n    placeholder: 'Ingrese su clave'\n  }]; // const requestCode = () =>{\n  //   // Auth.resendSignUp(user ? user.username : email)\n  // }\n\n  const handlerSubmit = async data => {\n    const {\n      email,\n      password\n    } = data;\n    setOnSubmit(data);\n\n    try {\n      //REGISTRY\n      // const signUpResponse = await Auth.signUp({\n      //   username: email,\n      //   password,\n      //   attributes: {\n      //     name: 'Manu',\n      //     email: email,\n      //   },\n      // });\n      // console.log('--signUpResponse-', signUpResponse);\n      // setErrorAuth(signUpResponse.userConfirmed);\n      const user = email && password ? await Auth.signIn({\n        username: email,\n        password\n      }) : setErrorAuth('Datos incorrectos'); // const user = await Auth.signIn({\n      //   username: email,\n      //   password,\n      // })\n\n      user.attributes.sub && history.push('inicio'); // console.log('--user-cognito--', user.attributes);\n      // user.attributes.sub && redirect('Home');\n      // attributes:\n      // email: \"mortega@apgca.cl\"\n      // email_verified: true\n      // sub:\"d8d2ff8a-5889-4796-9c6f-e40e51e073ab\"\n      //\n    } catch (error) {\n      // if(error.hasOwnProperty('message')){\n      // const msg = errorDictionary[error.code].message && errorDictionary['0'].message;\n      setErrorAuth(error);\n      console.log('--error-AUTH--', error); // }else{\n      // setErrorAuth('Debe ingresar los datos para continuar');\n      // }\n      // console.log('--ERROR--', error.message);\n      // console.log('--ERROR--', error.code);\n    }\n  };\n\n  useEffect(() => {\n    Auth.currentSession().then(data => data.getAccessToken().getJwtToken() && history.push('inicio'));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex flex-col w-full mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: JSON.stringify(onSubmit)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 9\n      }, this), onSubmit && message && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-full mb-4\",\n        children: /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"bg-transparent border-green-500 text-green-500\",\n          borderLeft: true,\n          raised: true,\n          children: message\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 128,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Validation, {\n        items: items,\n        onSubmit: handlerSubmit\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"mt-4 w-1/2\",\n        children: JSON.stringify(errorAuth)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 7\n    }, this)\n  }, void 0, false);\n};\n\n_s(Login, \"KOmalIjeI3PGNhjEAEsOmR6vIfo=\", false, function () {\n  return [useHistory];\n});\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["/Users/manu/_CODE/PROYECTOS/HOLACOMUNIDAD/_CODES/d-board/src/components/sample-forms/login.js"],"names":["React","useState","useEffect","useHistory","Amplify","Auth","Validation","Alert","config","configure","Login","message","history","console","log","onSubmit","setOnSubmit","errorAuth","setErrorAuth","items","label","error","required","name","type","placeholder","minLength","value","maxLength","handlerSubmit","data","email","password","user","signIn","username","attributes","sub","push","currentSession","then","getAccessToken","getJwtToken","JSON","stringify"],"mappings":"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","sourcesContent":["import React, {useState, useEffect} from 'react';\nimport { useHistory } from 'react-router-dom';\nimport Amplify, { Auth } from 'aws-amplify';\n\nimport Validation from '../forms/validation';\nimport Alert from '../alerts';\nimport config from '../../aws-exports';\nAmplify.configure(config);\n\nconst Login = ({message = null}) => {\n  const history = useHistory();\n  console.log('--history--',history)\n\n  const [onSubmit, setOnSubmit] = useState(null)\n  const [errorAuth, setErrorAuth] = useState('');\n  let items = [\n    {\n      label: 'Email',\n      error: {required: 'Ingrese un email Válido'},\n      name: 'email',\n      type: 'email',\n      placeholder: 'Ingrese su email'\n    },\n    {\n      label: 'Clave',\n      error: {\n        required: 'Password is required',\n        minLength: {\n          value: 4,\n          message: 'Your password should have at least 4 characters'\n        },\n        maxLength: {\n          value: 8,\n          message: 'Your password should have no more than 8 characters'\n        }\n      },\n      name: 'password',\n      type: 'password',\n      placeholder: 'Ingrese su clave'\n    },\n  ]\n\n  // const requestCode = () =>{\n  //   // Auth.resendSignUp(user ? user.username : email)\n  // }\n  const handlerSubmit = async (data) => {\n    const {email, password} = data;\n\n    setOnSubmit(data)\n    try {\n\n\n\n      //REGISTRY\n      // const signUpResponse = await Auth.signUp({\n      //   username: email,\n      //   password,\n      //   attributes: {\n      //     name: 'Manu',\n      //     email: email,\n      //   },\n      // });\n      // console.log('--signUpResponse-', signUpResponse);\n\n      // setErrorAuth(signUpResponse.userConfirmed);\n\n\n\n      const user = (email && password) ?\n        await Auth.signIn({\n          username: email,\n          password,\n        })\n        : setErrorAuth('Datos incorrectos')\n\n\n      // const user = await Auth.signIn({\n      //   username: email,\n      //   password,\n      // })\n\n      user.attributes.sub && history.push('inicio')\n\n\n      // console.log('--user-cognito--', user.attributes);\n\n      // user.attributes.sub && redirect('Home');\n\n      // attributes:\n      // email: \"mortega@apgca.cl\"\n      // email_verified: true\n      // sub:\"d8d2ff8a-5889-4796-9c6f-e40e51e073ab\"\n\n      //\n\n    } catch (error) {\n\n      // if(error.hasOwnProperty('message')){\n\n        // const msg = errorDictionary[error.code].message && errorDictionary['0'].message;\n        setErrorAuth(error)\n        console.log('--error-AUTH--', error)\n\n\n      // }else{\n        // setErrorAuth('Debe ingresar los datos para continuar');\n      // }\n      // console.log('--ERROR--', error.message);\n      // console.log('--ERROR--', error.code);\n\n    }\n\n  };\n\n\n  useEffect(() => {\n\n    Auth.currentSession().then( data => data.getAccessToken().getJwtToken() && history.push('inicio') );\n\n  }, []);\n\n  return (\n    <>\n      <div className=\"flex flex-col w-full mb-4\">\n        <span>{JSON.stringify(onSubmit)}</span>\n        {onSubmit && message && (\n          <div className=\"w-full mb-4\">\n            <Alert\n              color=\"bg-transparent border-green-500 text-green-500\"\n              borderLeft\n              raised>\n              {message}\n            </Alert>\n          </div>\n        )}\n        <Validation items={items} onSubmit={handlerSubmit} />\n        <span className=\"mt-4 w-1/2\">{JSON.stringify(errorAuth)}</span>\n      </div>\n    </>\n  )\n}\n\nexport default Login\n"]},"metadata":{},"sourceType":"module"}